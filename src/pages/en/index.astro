---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import Hero from "../../components/Hero.astro";
import { getCollection } from "astro:content";
import { getRelativeLocaleUrl } from "../../i18n/utils";

// Get latest news in English
const allNews = await getCollection("news");
const latestNews = allNews
    .filter((item) => item.data.lang === "en")
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())[0];
---

<Layout
    title="Time Biotechnologies, Inc. | Neurodegenerative Disease x iPS Drug Discovery Platform"
>
    <Header />

    <main>
        <Hero />

        <!-- Value Proposition Section -->
        <section class="section value-prop-section">
            <div class="container">
                <h2 class="section-title text-center mb-8">
                    Service & Technology
                </h2>
                <div class="grid-3">
                    <div class="card">
                        <div class="card-icon">ðŸ§¬</div>
                        <h3>Disease Modeling</h3>
                        <p>
                            We construct models that faithfully reproduce
                            pathologies of neurodegenerative diseases using
                            patient-derived iPS cells.
                        </p>
                    </div>
                    <div class="card">
                        <div class="card-icon">ðŸ”¬</div>
                        <h3>Screening</h3>
                        <p>
                            We establish highly reproducible evaluation systems
                            to realize high-throughput and high-precision drug
                            screening.
                        </p>
                    </div>
                    <div class="card">
                        <div class="card-icon">ðŸ’Š</div>
                        <h3>Multi-Modality</h3>
                        <p>
                            We provide evaluation systems compatible with
                            diverse modalities including small molecules,
                            antibodies, nucleic acids, and cell therapies.
                        </p>
                    </div>
                </div>
                <div class="text-center" style="margin-top: 3rem;">
                    <a
                        href={getRelativeLocaleUrl("en", "pipeline")}
                        class="btn btn-secondary">View Pipeline</a
                    >
                </div>
            </div>
        </section>

        <!-- Why Time Bio Section -->
        <section class="section why-section">
            <div class="container">
                <div class="why-content text-center">
                    <h2>Why Time Biotechnologies</h2>
                    <p class="lead-text">Time is Resource.</p>
                    <p>
                        Our company name embodies the philosophy of viewing
                        "Time" as the most precious resource.<br />
                        Converting the vast amount of time in the drug discovery process
                        into "Cures" through technology.<br />
                        That is the mission of Time Biotechnologies.
                    </p>
                    <a
                        href={getRelativeLocaleUrl("en", "company")}
                        class="text-link">View Corporate Philosophy â†’</a
                    >
                </div>
            </div>
        </section>

        <!-- News Section -->
        <section class="section news-section">
            <div class="container">
                <div class="news-wrapper">
                    <h2 class="news-heading">Latest News</h2>
                    {
                        latestNews ? (
                            <a
                                href={getRelativeLocaleUrl(
                                    "en",
                                    `news/${latestNews.slug}`,
                                )}
                                class="news-item"
                            >
                                <span class="news-date">
                                    {latestNews.data.pubDate
                                        .toISOString()
                                        .slice(0, 10)}
                                </span>
                                <span class="news-title">
                                    {latestNews.data.title}
                                </span>
                                <span class="arrow">â†’</span>
                            </a>
                        ) : (
                            <p>No news available at the moment.</p>
                        )
                    }
                    <div class="news-more">
                        <a
                            href={getRelativeLocaleUrl("en", "news")}
                            class="btn btn-sm">View All</a
                        >
                    </div>
                </div>
            </div>
        </section>

        <!-- Common CTA -->
        <section class="section cta-section">
            <div class="container text-center">
                <h2>Contact Us</h2>
                <p class="mb-8">
                    Please feel free to contact us regarding collaborative
                    research or contract services.
                </p>
                <a
                    href={getRelativeLocaleUrl("en", "contact")}
                    class="btn btn-primary">Contact Us</a
                >
            </div>
        </section>
    </main>

    <Footer />
</Layout>

<style>
    .section-title {
        font-size: 2rem;
        margin-bottom: 3rem;
    }

    .grid-3 {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
    }

    .card {
        padding: 2rem;
        background: white;
        border: 1px solid var(--c-gray-100);
        border-radius: var(--radius-md);
        transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        border-color: var(--c-accent);
    }

    .card-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .card h3 {
        margin-bottom: 1rem;
        font-size: 1.25rem;
    }

    .card p {
        color: var(--c-gray-500);
        font-size: 0.95rem;
    }

    /* Why Section */
    .why-section {
        background-color: var(--c-gray-50);
    }

    .lead-text {
        font-size: 1.5rem;
        font-weight: 700;
        font-family: var(--font-heading);
        margin: 1rem 0;
        color: var(--c-accent);
    }

    .text-link {
        display: inline-block;
        margin-top: 1.5rem;
        color: var(--c-black);
        font-weight: 600;
        border-bottom: 1px solid currentColor;
    }

    /* News Section */
    .news-wrapper {
        max-width: 800px;
        margin: 0 auto;
    }

    .news-heading {
        text-align: center;
        margin-bottom: 2rem;
        font-size: 1.5rem;
    }

    .news-item {
        display: flex;
        align-items: center;
        gap: 2rem;
        padding: 1.5rem;
        border: 1px solid var(--c-gray-200);
        border-radius: var(--radius-sm);
        transition: background-color 0.2s;
    }

    .news-item:hover {
        background-color: var(--c-gray-50);
    }

    .news-date {
        color: var(--c-gray-500);
        font-family: monospace;
    }

    .news-title {
        flex-grow: 1;
        font-weight: 500;
    }

    .news-more {
        text-align: center;
        margin-top: 1.5rem;
    }

    .btn-sm {
        font-size: 0.875rem;
        padding: 0.5rem 1rem;
        border: 1px solid var(--c-gray-200);
        color: var(--c-gray-500);
        border-radius: 999px;
    }

    /* CTA Section */
    .cta-section {
        background-color: var(--c-primary);
        color: white;
    }

    .cta-section h2 {
        color: white;
        margin-bottom: 1rem;
    }

    .cta-section p {
        color: var(--c-gray-200);
    }

    .cta-section .btn-primary {
        background-color: white;
        color: var(--c-primary);
    }

    .cta-section .btn-primary:hover {
        background-color: var(--c-accent);
        color: white;
    }

    @media (max-width: 768px) {
        .grid-3 {
            grid-template-columns: 1fr;
        }

        .news-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .arrow {
            display: none;
        }
    }
</style>
